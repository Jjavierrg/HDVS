<div class="position-relative d-flex flex-column w-100 h-100" *ngIf="review">
  <div class="row">
    <div class="col-12">
      <a class="nav-link pl-0" [routerLink]="'/fichas/' + review.fichaId">&lt; {{ 'seguimientos.volver-ficha' | translate }}</a>
    </div>
    <div class="col-12" *ngIf="!!review.completo">
      <div class="alert alert-success text-center font-weight-bold" role="alert">
        <i class="fas fa-info-circle"></i>
        {{ 'seguimientos.ficha-completa' | translate }}
      </div>
    </div>
    <div class="col-12" *ngIf="!review.completo">
      <div class="alert alert-warning text-center font-weight-bold" role="alert">
        <i class="fas fa-exclamation-circle"></i>
        {{ 'seguimientos.ficha-incompleta' | translate }}
      </div>
    </div>
  </div>
  <app-card-info [cardId]="review.fichaId" *appAllowedPermissions="{permissions: [permissions.personalcard.access]}"
    (editCardRequired)="onEditCardRequired()">
  </app-card-info>
  <form #reviewForm="ngForm" class="mt-3">
    <div class="row">
      <div class="form-group col-md-2">
        <label for="inputFecha">{{ 'core.fecha' | translate }}</label>
        <app-datepicker id="inputFecha" required class="mr-auto" [(ngModel)]="review.fecha" disabled
          name="{{ 'comun.fecha' | translate }}">
        </app-datepicker>
      </div>
      <div class="form-group col-md-4">
        <label for="inputTecnico">{{ 'ficha.tecnico' | translate }}</label>
        <app-combobox id="inputTecnico" [placeholder]="'ficha.tecnico' | translate" [(ngModel)]="review.usuarioId"
          disabled name="{{ 'ficha.tecnico' | translate }}" required [data]="users">
        </app-combobox>
      </div>
      <div class="form-group offset-md-1 col-md-3">
        <label for="inputRango">{{ 'comun.grado' | translate }}</label>
        <input id="inputRango" type="text" class="form-control" disabled [value]="getRange()" />
      </div>
      <div class="form-group col-md-2">
        <label for="inputPuntuacion">{{ 'seguimientos.puntuacion' | translate }}</label>
        <input id="inputPuntuacion" type="number" class="form-control" disabled [value]="getPuntuacion()" />
      </div>
    </div>
  </form>
  <div *ngFor="let dimension of dimensions" class="mb-3">
    <div class="row">
      <div class="col-6 d-flex flex-row-reverse">
        <span class="flex-grow-1 dimension-description">
          <h5>{{ dimension.descripcion }}</h5>
        </span>
        <img src="assets/icons/{{dimension.orden}}.svg" width="60px" class="d-none d-lg-block">
      </div>
      <div class="col-6 d-flex">
        <div class="flex-grow-1 line"></div>
        <p class="score">{{ getDimensionScore(dimension) }}</p>
      </div>
    </div>
    <div class="row mt-3" *ngFor="let category of dimension.categorias">
      <div class="col-12 order-1">
        <h5 class="text-primary pl-lg-3">{{ category.descripcion }}</h5>
      </div>
      <div class="col-11 col-lg-6 order-2">
        <p class="ml-lg-5 text-primary">{{ getCategoryDescription(category.id) }}</p>
      </div>
      <div class="col-12 col-lg-5 order-4 order-lg-3">
        <p class="text-muted font-weight-light" *ngIf="checkedIndicator(category.id)"><i
            class="fas fa-check-circle text-success"></i> {{ checkedIndicator(category.id) }}</p>
      </div>
      <div class="col-1 order-3 order-lg-4 text-center d-flex flex-column align-items-center category-score-container">
        <span class="text-primary rounded-circle border-primary category-score">
          {{ getCategoryScore(category.id) }}
        </span>
      </div>
      <div class="col-12 order-5" *ngIf="getCategoryObservations(category.id)">
        <div class="card mx-lg-3">
          <div class="card-body" [innerHTML]="getCategoryObservations(category.id)"></div>
        </div>
      </div>
    </div>
  </div>
</div>
